{"ast":null,"code":"var _jsxFileName = \"/Users/mayaesar/Documents/concordia-bootcamps/Projects/project-GROUP-e-commerce/client/src/components/UserContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext(null);\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [userId, setUserId] = useState(null); // user will store firstName, lastName, email, address and order\n\n  const [user, setUser] = useState(null);\n  const [cart, setCart] = useState(null);\n  const [wishlist, setWishlist] = useState(null);\n  const [isErr, setIsErr] = useState(false);\n  const [isItemsUpdated, setIsItemsUpdated] = useState(false); // To get current user info\n\n  const getUserData = async () => {\n    try {\n      // const res = await fetch(`/api/get-user/${userId}`);\n      const res = await fetch('/api/get-user/460d7e55-fab0-48de-9c07-f61b222bfab6');\n      const data = await res.json();\n      const userData = data.data;\n      setCart(userData.cart);\n      setWishlist(userData.wishlist);\n      const filteredUserData = Object.fromEntries(Object.entries(userData).filter(_ref2 => {\n        let [key, value] = _ref2;\n        return key !== 'cart' && key !== 'wishlist';\n      }));\n      setUser(filteredUserData);\n      setIsItemsUpdated(true);\n    } catch (err) {\n      setIsErr(true);\n    }\n  };\n\n  useEffect(() => {\n    const getUserId = () => {\n      const extractedInfo = window.localStorage.getItem(\"user-id\");\n      return extractedInfo && JSON.parse(extractedInfo);\n    };\n\n    setUserId(getUserId());\n    setIsErr(false);\n    setIsItemsUpdated(false);\n  }, []);\n  useEffect(() => {\n    getUserData();\n  }, [userId]);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      userId,\n      setUserId,\n      user,\n      cart,\n      setCart,\n      wishlist,\n      setWishlist,\n      getUserData,\n      isErr,\n      isItemsUpdated,\n      setIsItemsUpdated\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserProvider, \"GS7atBw/+Dni5coMo4FLT64mBbg=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/Users/mayaesar/Documents/concordia-bootcamps/Projects/project-GROUP-e-commerce/client/src/components/UserContext.js"],"names":["createContext","useEffect","useState","UserContext","UserProvider","children","userId","setUserId","user","setUser","cart","setCart","wishlist","setWishlist","isErr","setIsErr","isItemsUpdated","setIsItemsUpdated","getUserData","res","fetch","data","json","userData","filteredUserData","Object","fromEntries","entries","filter","key","value","err","getUserId","extractedInfo","window","localStorage","getItem","JSON","parse"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;;AAEA,OAAO,MAAMC,WAAW,gBAAGH,aAAa,CAAC,IAAD,CAAjC;AAEP,OAAO,MAAMI,YAAY,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AAC5C,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBL,QAAQ,CAAC,IAAD,CAApC,CAD4C,CAE5C;;AACA,QAAM,CAACM,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACQ,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACU,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACc,cAAD,EAAiBC,iBAAjB,IAAsCf,QAAQ,CAAC,KAAD,CAApD,CAP4C,CAS5C;;AACA,QAAMgB,WAAW,GAAG,YAAY;AAC9B,QAAI;AACJ;AACA,YAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,oDAAD,CAAvB;AACA,YAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AACA,YAAMC,QAAQ,GAAGF,IAAI,CAACA,IAAtB;AACAV,MAAAA,OAAO,CAACY,QAAQ,CAACb,IAAV,CAAP;AACAG,MAAAA,WAAW,CAACU,QAAQ,CAACX,QAAV,CAAX;AACA,YAAMY,gBAAgB,GAAGC,MAAM,CAACC,WAAP,CAAmBD,MAAM,CAACE,OAAP,CAAeJ,QAAf,EACjBK,MADiB,CACV;AAAA,YAAC,CAACC,GAAD,EAAMC,KAAN,CAAD;AAAA,eAAkBD,GAAG,KAAK,MAAR,IAAkBA,GAAG,KAAK,UAA5C;AAAA,OADU,CAAnB,CAAzB;AAEApB,MAAAA,OAAO,CAACe,gBAAD,CAAP;AACAP,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACC,KAXD,CAWE,OAAOc,GAAP,EAAY;AACZhB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF,GAfD;;AAiBAd,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM+B,SAAS,GAAG,MAAM;AACxB,YAAMC,aAAa,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,CAAtB;AACA,aAAOH,aAAa,IAAII,IAAI,CAACC,KAAL,CAAWL,aAAX,CAAxB;AACC,KAHD;;AAIA1B,IAAAA,SAAS,CAACyB,SAAS,EAAV,CAAT;AACAjB,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACAE,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD,GARQ,EAQN,EARM,CAAT;AAUAhB,EAAAA,SAAS,CAAC,MAAK;AACbiB,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAACZ,MAAD,CAFM,CAAT;AAIA,sBACE,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEA,MAAAA,MAAF;AACEC,MAAAA,SADF;AAEEC,MAAAA,IAFF;AAGEE,MAAAA,IAHF;AAIEC,MAAAA,OAJF;AAKEC,MAAAA,QALF;AAMEC,MAAAA,WANF;AAOEK,MAAAA,WAPF;AAQEJ,MAAAA,KARF;AASEE,MAAAA,cATF;AAUEC,MAAAA;AAVF,KAA7B;AAAA,cAYGZ;AAZH;AAAA;AAAA;AAAA;AAAA,UADF;AAgBD,CAzDM;;GAAMD,Y;;KAAAA,Y","sourcesContent":["import { createContext, useEffect, useState } from \"react\";\n\nexport const UserContext = createContext(null);\n\nexport const UserProvider = ({ children }) => {\n  const [userId, setUserId] = useState(null);\n  // user will store firstName, lastName, email, address and order\n  const [user, setUser] = useState(null);\n  const [cart, setCart] = useState(null);\n  const [wishlist, setWishlist] = useState(null);\n  const [isErr, setIsErr] = useState(false);\n  const [isItemsUpdated, setIsItemsUpdated] = useState(false);\n\n  // To get current user info\n  const getUserData = async () => {\n    try {\n    // const res = await fetch(`/api/get-user/${userId}`);\n    const res = await fetch('/api/get-user/460d7e55-fab0-48de-9c07-f61b222bfab6');\n    const data = await res.json();\n    const userData = data.data\n    setCart(userData.cart);\n    setWishlist(userData.wishlist);\n    const filteredUserData = Object.fromEntries(Object.entries(userData)\n                              .filter(([key, value]) => key !== 'cart' && key !== 'wishlist'));\n    setUser(filteredUserData);\n    setIsItemsUpdated(true);\n    } catch (err) {\n      setIsErr(true);\n    }\n  }\n\n  useEffect(() => {\n    const getUserId = () => {\n    const extractedInfo = window.localStorage.getItem(\"user-id\");\n    return extractedInfo && JSON.parse(extractedInfo);\n    };\n    setUserId(getUserId());\n    setIsErr(false);\n    setIsItemsUpdated(false);\n  }, []);\n\n  useEffect(() =>{\n    getUserData()\n  }, [userId])\n\n  return (\n    <UserContext.Provider value={{ userId, \n                                   setUserId,\n                                   user, \n                                   cart, \n                                   setCart, \n                                   wishlist, \n                                   setWishlist,\n                                   getUserData,\n                                   isErr,\n                                   isItemsUpdated, \n                                   setIsItemsUpdated,\n                                    }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}